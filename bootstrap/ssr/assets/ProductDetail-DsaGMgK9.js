import{jsxs as e,jsx as t,Fragment as r}from"react/jsx-runtime";import"react";import{M as a}from"./MainLayout-Cr78fusN.js";import{Head as i,Link as o}from"@inertiajs/react";import s from"./ProductImageGallery-Az94-c6m.js";import{ProductTitle as n,ImporterInfo as c,ProductActions as l}from"./ProductInfo-BgaFDEw-.js";import{P as m}from"./ProductCard-DXJ-byb4.js";import d from"./ProductSpecifications-DlqylQYv.js";import p from"./ProductReviews-CpEoLCaB.js";import"axios";import"./useStore-Bfof7OyV.js";import"zustand";import"zustand/middleware";import"@dnd-kit/core";import"@dnd-kit/sortable";import"@dnd-kit/utilities";import"react-dom";import"swiper/react";import"swiper/modules";import"./imageHelper-Mbc89JsA.js";/* empty css                   */import"react-easy-crop";const g=e=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:t("path",{d:"m15 18-6-6 6-6"})}),h=({product:h,relatedProducts:y=[],categories:u,filters:w={}})=>{var x,f,v,N,b;const j=(()=>{const e=new URLSearchParams;w.category&&e.set("category",w.category),w.sub_category&&e.set("sub_category",w.sub_category),w.brand&&e.set("brand",w.brand),w.search&&e.set("search",w.search),w.sort&&e.set("sort",w.sort);const t=e.toString(),r=w.category?`/category/${w.category}`:"/";return t?`${r}?${t}`:r})(),k={"@context":"https://schema.org/","@type":"Product",name:h.name,image:[h.image_main,...(h.additional_images||[]).map(e=>e.url)].filter(Boolean),description:h.description||h.name,sku:h.sku,brand:{"@type":"Brand",name:(null==(x=h.brand)?void 0:x.name)||"A-Toys"},offers:{"@type":"Offer",url:window.location.href,priceCurrency:"BYN",price:h.price,availability:h.stock>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",itemCondition:"https://schema.org/NewCondition"},aggregateRating:h.reviews_count>0?{"@type":"AggregateRating",ratingValue:h.reviews_avg_rating,reviewCount:h.reviews_count}:void 0,review:(h.reviews||[]).slice(0,5).map(e=>({"@type":"Review",author:{"@type":"Person",name:e.user_name||"Клиент"},datePublished:e.created_at,reviewRating:{"@type":"Rating",ratingValue:e.rating},reviewBody:e.comment}))},P={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Главная",item:window.location.origin},(null==(f=h.category)?void 0:f.parent)&&{"@type":"ListItem",position:2,name:h.category.parent.name,item:`${window.location.origin}/category/${h.category.parent.slug}`},h.category&&{"@type":"ListItem",position:(null==(v=h.category)?void 0:v.parent)?3:2,name:h.category.name,item:`${window.location.origin}/category/${h.category.slug}`},{"@type":"ListItem",position:(null==(N=h.category)?void 0:N.parent)?4:h.category?3:2,name:h.name,item:window.location.href}].filter(Boolean)};return e(a,{filters:w,children:[e(i,{title:h.name,children:[t("script",{type:"application/ld+json",children:JSON.stringify(k)}),t("script",{type:"application/ld+json",children:JSON.stringify(P)})]}),t("div",{className:"bg-white shadow-sm flex-shrink-0 sticky top-0 z-10",children:e("div",{className:"px-4 py-3 w-full flex items-center justify-between",children:[e(o,{href:j,className:"flex items-center gap-2 hover:text-red-600 transition-colors text-gray-900",children:[t(g,{className:"w-6 h-6"}),t("span",{className:"font-semibold text-sm",children:"Назад"})]}),e("nav",{className:"hidden sm:flex items-center gap-2 text-[10px] font-medium text-gray-400",children:[t(o,{href:"/",className:"hover:text-red-600 transition-colors",children:"Главная"}),t("span",{children:"/"}),(null==(b=h.category)?void 0:b.parent)&&e(r,{children:[t(o,{href:`/category/${h.category.parent.slug}`,className:"hover:text-red-600 transition-colors max-w-[100px] md:max-w-[150px] lg:max-w-[250px] truncate",children:h.category.parent.name}),t("span",{children:"/"})]}),h.category&&e(r,{children:[t(o,{href:`/category/${h.category.slug}`,className:"hover:text-red-600 transition-colors max-w-[100px] md:max-w-[150px] lg:max-w-[250px] truncate",children:h.category.name}),t("span",{children:"/"})]}),t("span",{className:"text-gray-900 max-w-[100px] md:max-w-[150px] lg:max-w-[250px] truncate",children:h.name})]})]})}),t("main",{className:"bg-gray-50",children:t("div",{className:"p-4 pb-32",children:e("div",{className:"w-full space-y-6",children:[t(s,{product:h}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t(n,{product:h}),t(d,{parameters:h.parameters})]}),t(c,{}),t(p,{reviews:h.reviews}),y.length>0&&e("div",{className:"w-full space-y-4",children:[t("h2",{className:"text-xl font-bold text-gray-900",children:"Похожие товары"}),t("div",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 3xl:grid-cols-6 gap-4",children:y.map(e=>t(m,{product:e},e.id))})]})]})})}),t("div",{className:"fixed bottom-16 left-20 right-0 z-20",children:t("div",{className:"p-4",children:t(l,{product:h})})})]})};export{h as default};

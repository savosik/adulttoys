import{r as Q,g as H,R as O}from"./app-nMwxjLQ7.js";const P={},I=n=>{let t;const e=new Set,r=(v,p)=>{const S=typeof v=="function"?v(t):v;if(!Object.is(S,t)){const l=t;t=p??(typeof S!="object"||S===null)?S:Object.assign({},t,S),e.forEach(m=>m(t,l))}},a=()=>t,y={setState:r,getState:a,getInitialState:()=>c,subscribe:v=>(e.add(v),()=>e.delete(v)),destroy:()=>{(P?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},c=t=n(r,a,y);return y},L=n=>n?I(n):I;var R={exports:{}},$={},x={exports:{}},D={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=Q;function A(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var J=typeof Object.is=="function"?Object.is:A,N=b.useState,U=b.useEffect,W=b.useLayoutEffect,k=b.useDebugValue;function q(n,t){var e=t(),r=N({inst:{value:e,getSnapshot:t}}),a=r[0].inst,o=r[1];return W(function(){a.value=e,a.getSnapshot=t,C(a)&&o({inst:a})},[n,e,t]),U(function(){return C(a)&&o({inst:a}),n(function(){C(a)&&o({inst:a})})},[n]),k(e),e}function C(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!J(n,e)}catch{return!0}}function M(n,t){return t()}var G=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?M:q;D.useSyncExternalStore=b.useSyncExternalStore!==void 0?b.useSyncExternalStore:G;x.exports=D;var B=x.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=Q,K=B;function X(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Y=typeof Object.is=="function"?Object.is:X,Z=K.useSyncExternalStore,V=_.useRef,ee=_.useEffect,te=_.useMemo,re=_.useDebugValue;$.useSyncExternalStoreWithSelector=function(n,t,e,r,a){var o=V(null);if(o.current===null){var d={hasValue:!1,value:null};o.current=d}else d=o.current;o=te(function(){function y(l){if(!c){if(c=!0,v=l,l=r(l),a!==void 0&&d.hasValue){var m=d.value;if(a(m,l))return p=m}return p=l}if(m=p,Y(v,l))return m;var u=r(l);return a!==void 0&&a(m,u)?(v=l,m):(v=l,p=u)}var c=!1,v,p,S=e===void 0?null:e;return[function(){return y(t())},S===null?void 0:function(){return y(S())}]},[t,e,r,a]);var f=Z(n,o[0],o[1]);return ee(function(){d.hasValue=!0,d.value=f},[f]),re(f),f};R.exports=$;var ne=R.exports;const oe=H(ne),T={},{useDebugValue:ae}=O,{useSyncExternalStoreWithSelector:ie}=oe;let w=!1;const se=n=>n;function ue(n,t=se,e){(T?"production":void 0)!=="production"&&e&&!w&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),w=!0);const r=ie(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return ae(r),r}const F=n=>{(T?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof n=="function"?L(n):n,e=(r,a)=>ue(t,r,a);return Object.assign(e,t),e},ce=n=>n?F(n):F,le={};function de(n,t){let e;try{e=n()}catch{return}return{getItem:a=>{var o;const d=y=>y===null?null:JSON.parse(y,void 0),f=(o=e.getItem(a))!=null?o:null;return f instanceof Promise?f.then(d):d(f)},setItem:(a,o)=>e.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>e.removeItem(a)}}const E=n=>t=>{try{const e=n(t);return e instanceof Promise?e:{then(r){return E(r)(e)},catch(r){return this}}}catch(e){return{then(r){return this},catch(r){return E(r)(e)}}}},fe=(n,t)=>(e,r,a)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:s=>s,version:0,merge:(s,h)=>({...h,...s}),...t},d=!1;const f=new Set,y=new Set;let c;try{c=o.getStorage()}catch{}if(!c)return n((...s)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...s)},r,a);const v=E(o.serialize),p=()=>{const s=o.partialize({...r()});let h;const i=v({state:s,version:o.version}).then(g=>c.setItem(o.name,g)).catch(g=>{h=g});if(h)throw h;return i},S=a.setState;a.setState=(s,h)=>{S(s,h),p()};const l=n((...s)=>{e(...s),p()},r,a);let m;const u=()=>{var s;if(!c)return;d=!1,f.forEach(i=>i(r()));const h=((s=o.onRehydrateStorage)==null?void 0:s.call(o,r()))||void 0;return E(c.getItem.bind(c))(o.name).then(i=>{if(i)return o.deserialize(i)}).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==o.version){if(o.migrate)return o.migrate(i.state,i.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return i.state}).then(i=>{var g;return m=o.merge(i,(g=r())!=null?g:l),e(m,!0),p()}).then(()=>{h==null||h(m,void 0),d=!0,y.forEach(i=>i(m))}).catch(i=>{h==null||h(void 0,i)})};return a.persist={setOptions:s=>{o={...o,...s},s.getStorage&&(c=s.getStorage())},clearStorage:()=>{c==null||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>u(),hasHydrated:()=>d,onHydrate:s=>(f.add(s),()=>{f.delete(s)}),onFinishHydration:s=>(y.add(s),()=>{y.delete(s)})},u(),m||l},ve=(n,t)=>(e,r,a)=>{let o={storage:de(()=>localStorage),partialize:u=>u,version:0,merge:(u,s)=>({...s,...u}),...t},d=!1;const f=new Set,y=new Set;let c=o.storage;if(!c)return n((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...u)},r,a);const v=()=>{const u=o.partialize({...r()});return c.setItem(o.name,{state:u,version:o.version})},p=a.setState;a.setState=(u,s)=>{p(u,s),v()};const S=n((...u)=>{e(...u),v()},r,a);a.getInitialState=()=>S;let l;const m=()=>{var u,s;if(!c)return;d=!1,f.forEach(i=>{var g;return i((g=r())!=null?g:S)});const h=((s=o.onRehydrateStorage)==null?void 0:s.call(o,(u=r())!=null?u:S))||void 0;return E(c.getItem.bind(c))(o.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==o.version){if(o.migrate)return[!0,o.migrate(i.state,i.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var g;const[j,z]=i;if(l=o.merge(z,(g=r())!=null?g:S),e(l,!0),j)return v()}).then(()=>{h==null||h(l,void 0),l=r(),d=!0,y.forEach(i=>i(l))}).catch(i=>{h==null||h(void 0,i)})};return a.persist={setOptions:u=>{o={...o,...u},u.storage&&(c=u.storage)},clearStorage:()=>{c==null||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>d,onHydrate:u=>(f.add(u),()=>{f.delete(u)}),onFinishHydration:u=>(y.add(u),()=>{y.delete(u)})},o.skipHydration||m(),l||S},me=(n,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((le?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),fe(n,t)):ve(n,t),he=me,Se=ce(he((n,t)=>({cart:[],favorites:[],chatQueue:[],addToCart:e=>{const{cart:r}=t(),a=r.find(o=>o.id===e.id);n(a?{cart:r.map(o=>o.id===e.id?{...o,quantity:o.quantity+1}:o)}:{cart:[...r,{...e,quantity:1}]})},removeFromCart:e=>{n({cart:t().cart.filter(r=>r.id!==e)})},updateCartQuantity:(e,r)=>{if(r<=0){t().removeFromCart(e);return}n({cart:t().cart.map(a=>a.id===e?{...a,quantity:r}:a)})},incrementCartQuantity:e=>{const r=t().cart.find(a=>a.id===e);r&&t().updateCartQuantity(e,r.quantity+1)},decrementCartQuantity:e=>{const r=t().cart.find(a=>a.id===e);r&&t().updateCartQuantity(e,r.quantity-1)},clearCart:()=>{console.log("Clearing cart..."),n({cart:[]}),console.log("Cart cleared:",t().cart)},getCartTotal:()=>t().cart.reduce((e,r)=>e+r.price*r.quantity,0),getCartCount:()=>t().cart.reduce((e,r)=>e+r.quantity,0),addToFavorites:e=>{const{favorites:r}=t();r.find(a=>a.id===e.id)||n({favorites:[...r,e]})},removeFromFavorites:e=>{n({favorites:t().favorites.filter(r=>r.id!==e)})},toggleFavorite:e=>{const{favorites:r}=t();r.find(o=>o.id===e.id)?t().removeFromFavorites(e.id):t().addToFavorites(e)},isFavorite:e=>t().favorites.some(r=>r.id===e),getFavoritesCount:()=>t().favorites.length,clearFavorites:()=>{console.log("Clearing favorites..."),n({favorites:[]}),console.log("Favorites cleared:",t().favorites)},addToChatQueue:e=>{const{chatQueue:r}=t();r.find(a=>a.id===e.id)||n({chatQueue:[...r,e]})},removeFromChatQueue:e=>{n({chatQueue:t().chatQueue.filter(r=>r.id!==e)})},toggleChatQueue:e=>{const{chatQueue:r}=t();r.find(o=>o.id===e.id)?t().removeFromChatQueue(e.id):t().addToChatQueue(e)},clearChatQueue:()=>{n({chatQueue:[]})},getChatQueueCount:()=>t().chatQueue.length}),{name:"ecom-storage",partialize:n=>({cart:n.cart,favorites:n.favorites,chatQueue:n.chatQueue})}));export{Se as u};
